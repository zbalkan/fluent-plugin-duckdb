<match **>
  @type duckdb
  database /var/log/fluent/ducklogs.duckdb
  table fluentd_events
  time_col time
  tag_col  tag
  record_col record
  dedupe true

  <buffer tag,time>
    @type memory
    timekey 30s
    timekey_wait 5s
    flush_mode interval
    flush_interval 3s
    flush_thread_count 1
    chunk_limit_size 4m
    total_limit_size 256m
    retry_wait 5s
    retry_max_interval 2m
  </buffer>
</match>